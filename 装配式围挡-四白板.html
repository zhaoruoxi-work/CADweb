<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>装配式围挡图纸制作</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #3498db;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        button:hover {
            background-color: #2980b9;
        }
    </style>
</head>

<body>
    <div style="width: 60%;">
        <svg version="1.1" id="图层_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
            x="0px" y="0px" viewBox="0 0 1411 936" style="enable-background:new 0 0 1411 936;" xml:space="preserve">
            <rect width="100%" height="100%" fill="#FFFFFF"/> <!-- 添加的白色背景 -->
            
            <style type="text/css">
                .st0 {
                    fill: #4D4D4D;
                    stroke: #000000;
                    stroke-width: 1.5;
                    stroke-miterlimit: 10;
                }

                .st1 {
                    fill: none;
                    stroke: #000000;
                    stroke-width: 2;
                    stroke-miterlimit: 10;
                }

                .st2 {
                    fill: none;
                    stroke: #000000;
                    stroke-width: 1.5;
                    stroke-miterlimit: 10;
                }

                .st3 {
                    fill: none;
                    stroke: #00FFFF;
                    stroke-width: 2;
                    stroke-miterlimit: 10;
                }

                .st4 {
                    fill: #00FFFF;
                }

                .st5 {
                    font-family: sans-serif;
                }

                .st6 {
                    font-size: 22px;
                }
            </style>
            <rect x="133" y="93" class="st0" width="84" height="14" />
            <rect x="210" y="140" class="st0" width="838" height="14" />
            <rect x="210" y="689" class="st0" width="838" height="99" />
            <rect x="140" y="107" class="st0" width="70" height="683" />
            <line class="st1" x1="136" y1="791" x2="216" y2="791" />
            <rect x="1041" y="93" class="st0" width="84" height="14" />
            <rect x="1048" y="107" class="st0" width="70" height="683" />
            <line class="st1" x1="1044" y1="791" x2="1124" y2="791" />
            <line class="st2" x1="210" y1="286" x2="1048" y2="287" />
            <line class="st2" x1="210" y1="420" x2="1048" y2="421" />
            <line class="st2" x1="210" y1="554" x2="1048" y2="555" />
            <line class="st3" x1="130" y1="93" x2="94" y2="93" />
            <line class="st3" x1="130" y1="790.5" x2="94" y2="790.5" />
            <g>
                <g>
                    <line class="st3" x1="111.5" y1="107.6" x2="111.5" y2="776.4" />
                    <g>
                        <polygon class="st4" points="111.5,93.5 103.4,113.4 111.5,108.7 119.6,113.4" />
                    </g>
                    <g>
                        <polygon class="st4" points="111.5,790.5 103.4,770.6 111.5,775.3 119.6,770.6" />
                    </g>
                </g>
            </g>
            <foreignObject x="50" y="430" width="200" height="30">

                <body xmlns="http://www.w3.org/1999/xhtml">
                    <div contenteditable="true" class="st5 st6">2500</div>
                </body>
            </foreignObject>
            <foreignObject x="750" y="875" width="300" height="30">

                <body xmlns="http://www.w3.org/1999/xhtml">
                    <div contenteditable="true" class="st5 st6">灰色挡板：360*3000*0.5</div>
                </body>
            </foreignObject>
            <foreignObject x="600" y="35" width="200" height="30">

                <body xmlns="http://www.w3.org/1999/xhtml">
                    <div contenteditable="true" class="st5 st6">3200</div>
                </body>
            </foreignObject>
            <line class="st3" x1="1083" y1="87" x2="1083" y2="51" />
            <line class="st3" x1="175" y1="87" x2="175" y2="51" />
            <g>
                <g>
                    <line class="st3" x1="1061.4" y1="68.5" x2="189.6" y2="68.1" />
                    <g>
                        <polygon class="st4" points="1075.5,68.5 1055.6,60.4 1060.3,68.5 1055.6,76.6" />
                    </g>
                    <g>
                        <polygon class="st4" points="175.4,68.1 195.3,60 190.6,68.1 195.3,76.2" />
                    </g>
                </g>
            </g>
            <g>
                <g>
                    <line class="st3" x1="586.2" y1="892.1" x2="453.2" y2="758.5" />
                    <g>
                        <polygon class="st4" points="443.2,748.5 463,756.9 454,759.3 451.5,768.3" />
                    </g>
                </g>
            </g>
            <line class="st3" x1="730" y1="892" x2="586" y2="892" />
            <foreignObject x="1150" y="335" width="300" height="30">

                <body xmlns="http://www.w3.org/1999/xhtml">
                    <div contenteditable="true" class="st5 st6">立柱：150*250*2500*1.0</div>
                </body>
            </foreignObject>
            <g>
                <g>
                    <line class="st3" x1="1221.2" y1="376.9" x2="1088.2" y2="510.5" />
                    <g>
                        <polygon class="st4" points="1078.2,520.5 1086.5,500.6 1088.9,509.7 1098,512.1" />
                    </g>
                </g>
            </g>
            <line class="st3" x1="1308" y1="377" x2="1221" y2="377" />
            <foreignObject x="930" y="15" width="300" height="30">

                <body xmlns="http://www.w3.org/1999/xhtml">
                    <div contenteditable="true" class="st5 st6">横梁：30*50*3000*0.6</div>
                </body>
            </foreignObject>
            <g>
                <g>
                    <line class="st3" x1="835.2" y1="33.9" x2="732.4" y2="136.4" />
                    <g>
                        <polygon class="st4" points="723.1,147 730.1,126.7 733.1,135.6 742.4,137.4" />
                    </g>
                </g>
            </g>
            <line class="st3" x1="922" y1="34" x2="835" y2="34" />
            <foreignObject x="550" y="75" width="300" height="30">

                <body xmlns="http://www.w3.org/1999/xhtml">
                    <div contenteditable="true" class="st5 st6">白色挡板：480*3000*0.5</div>
                </body>
            </foreignObject>
            <g>
                <g>
                    <line class="st3" x1="449.2" y1="90.9" x2="336.7" y2="209.8" />
                    <g>
                        <polygon class="st4" points="327,220 334.8,200 337.4,209 346.6,211.1" />
                    </g>
                </g>
            </g>
            <line class="st3" x1="536" y1="91" x2="449" y2="91" />
        </svg>

        <!-- 添加按钮 -->
        <button onclick="generateImage()">生成图片</button>

        <script>
            function generateImage() {
                // 获取SVG元素
                var svgElement = document.querySelector('svg');

                // 创建Canvas元素
                var canvas = document.createElement('canvas');
                canvas.width = svgElement.clientWidth;
                canvas.height = svgElement.clientHeight;
                var context = canvas.getContext('2d');

                // 将SVG绘制到Canvas上
                var svgString = new XMLSerializer().serializeToString(svgElement);
                var img = new Image();
                img.src = 'data:image/svg+xml,' + encodeURIComponent(svgString);
                img.onload = function () {
                    context.drawImage(img, 0, 0);

                    // 将Canvas转换为DataURL并显示在浏览器中
                    var imageDataURL = canvas.toDataURL('image/png');
                    var imageWindow = window.open('', '_blank');
                    imageWindow.document.write('<img src="' + imageDataURL + '" alt="Generated Image">');
                };
            }
        </script>
    </div>
</body>

</html>
